name: Tag
on:
  workflow_dispatch:
jobs:
    tag:
        permissions:
            pull-requests: write
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1
        - run: |
            echo "Hello there" >> output.txt
            git checkout -b another-test-branch
            git add .
            git commit -m "Apply test change on test branch"
        - name: Create Pull Request
          uses: actions/github-script@60a0d83039c74a4aee543508d2ffcb1c3799cdea # v7.0.1
          with:
            script: |
                const { repo, owner } = context.repo;
                const result = await github.rest.pulls.create({
                  title: 'chore: Update data from AWS APIs',
                  owner,
                  repo,
                  head: 'another-test-branch',
                  base: 'main',
                  body: [
                    'Updates auto generated files with data from the AWS APIs for pricing and VPC limits. Please remove the branch after merging.',
                    'This PR is generated by [APICodeGen](https://github.com/aws/karpenter/actions/workflows/codegen.yml).'
                  ].join('\n')
                });